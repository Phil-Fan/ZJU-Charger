# 快速开始

本文档讲解用户侧如何使用 ZJU Charger 项目。

## Web 页面

### 访问方式

1. **在线访问**：访问部署好的 Web 页面（如 `https://charger.philfan.cn/web/`）
2. **本地访问**：启动服务器后访问 `http://localhost:8000/web/`

### 主要功能

- **地图可视化**：在地图上查看所有充电桩的位置和状态
- **站点列表**：查看所有站点的详细信息（名称、位置、可用数量等）
- **服务商筛选**：通过下拉框筛选特定服务商的站点
- **校区筛选**：筛选特定校区的站点（玉泉、紫金港等）
- **关注列表**：点击站点列表中的心形图标，添加/移除关注站点
- **自动刷新**：页面会自动刷新站点状态（默认 60 秒）

### 使用技巧

- 点击地图上的标记点可以查看站点详情
- 使用右上角的地图切换按钮可以切换不同的地图源（高德地图、OpenStreetMap 等）
- 关注列表数据存储在浏览器 localStorage 中，清除浏览器数据会导致列表丢失

## iOS 快捷指令

### 安装方式

1. 下载快捷指令文件（`.shortcut` 格式）
2. 在 iOS 设备上打开快捷指令 App
3. 导入下载的快捷指令文件

### 使用方法

1. 在快捷指令 App 中运行对应的快捷指令
2. 或通过 Siri 语音命令运行（如果已配置）
3. 快捷指令会自动查询关注站点的状态并显示结果

### 功能说明

- **关注点快速查询**：快速查询已关注的充电桩站点状态
- **自定义 API 地址**：可以在快捷指令中配置 API 服务器地址

详细使用说明请参考 [Script 快捷指令文档](./06-script-shortcuts.md)。

## 钉钉机器人

### 配置方式

1. 在钉钉群聊中添加自定义机器人
2. 获取 Webhook 地址和签名密钥
3. 在服务器环境变量中配置：

   ```env
   DINGTALK_WEBHOOK=https://oapi.dingtalk.com/robot/send?access_token=xxx
   DINGTALK_SECRET=your_secret_here
   ```

### DingBot 使用方法

在钉钉群聊中发送命令：

- `/全部` - 查询所有站点状态
- `/关注` - 查询关注站点状态（需要先配置关注列表）
- `/帮助` - 显示帮助信息

详细配置说明请参考 [钉钉机器人文档](./05-dingbot.md)。

## API 接口

### 基础接口

- `GET /api/status` - 查询所有站点状态
  - 参数：`?provider=neptune` - 筛选特定服务商
  - 参数：`?id=xxx` - 查询指定站点
- `GET /api/providers` - 获取可用服务商列表
- `GET /api/config` - 获取前端配置信息

### 使用示例

```bash
# 查询所有站点
curl http://localhost:8000/api/status

# 查询特定服务商的站点
curl http://localhost:8000/api/status?provider=neptune

# 查询指定站点
curl http://localhost:8000/api/status?id=29e30f45
```

## 常见问题

### Q: Web 页面无法访问？

A: 检查后端服务器是否正常运行，确认端口是否正确。

### Q: 快捷指令查询失败？

A: 检查 API 服务器地址配置是否正确，确保网络连接正常。

### Q: 钉钉机器人无响应？

A: 检查环境变量配置是否正确，确认服务器已启动并正常运行。

### Q: 数据不更新？

A: 系统会自动定时抓取数据，如果长时间不更新，请检查服务器日志。
